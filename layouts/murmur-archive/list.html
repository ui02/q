{{/* layouts/murmur-archive/list.html */}}
{{ define "main" }}

<h1>{{ .Title }}</h1>

{{ if eq .Kind "section" }}
  {{/* 全体トップページ: 年→月でグループ化 + ページネーション */}}
  {{ $allPages := .Pages.ByDate.Reverse }}
  {{ $paginator := .Paginate $allPages 10 }} {{/* 1ページに10件ずつ */}}

  {{ range $year, $months := (dict) }}
    {{/* 年月でグループ化する処理は省略、以下はページネーション用 */}}
  {{ end }}

  <ul>
    {{ range $paginator.Pages }}
      <li>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a> ({{ .Date.Format "2006-01-02" }})
      </li>
    {{ end }}
  </ul>

  <nav class="pagination">
    {{ if $paginator.HasPrev }}
      <a href="{{ $paginator.Prev.URL }}">« 前</a>
    {{ end }}
    {{ range $paginator.Pagers }}
      {{ if eq . $paginator }}
        <strong>{{ .PageNumber }}</strong>
      {{ else }}
        <a href="{{ .URL }}">{{ .PageNumber }}</a>
      {{ end }}
    {{ end }}
    {{ if $paginator.HasNext }}
      <a href="{{ $paginator.Next.URL }}">次 »</a>
    {{ end }}
  </nav>

{{ else }}
  {{/* 月別ページ: 単純リスト */}}
  <ul>
    {{ range .Pages.ByDate.Reverse }}
      <li><a href="{{ .RelPermalink }}">{{ .Title }}</a> ({{ .Date.Format "2006-01-02" }})</li>
    {{ end }}
  </ul>
{{ end }}

{{ end }}
